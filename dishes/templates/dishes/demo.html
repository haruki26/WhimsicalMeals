{% extends 'base.html' %}
{% load static compress %}

{% block title %}æ–™ç†ç”Ÿæˆãƒ‡ãƒ¢ - æ°—ã¾ãã‚Œãƒ¬ã‚·ãƒ”ç ”ç©¶æ‰€{% endblock %}

{% block extra_css %}
{{ block.super }}
{% compress css %}
<link rel="stylesheet" type="text/x-scss" href="{% static 'dishes/scss/pages/demo.scss' %}">
{% endcompress %}
{% endblock %}

{% block content %}
<div class="demo-container">
    <div class="header-section">
        <h1>ğŸ² æ–™ç†ç”Ÿæˆãƒ‡ãƒ¢</h1>
        <p>ææ–™ã‚’å…¥åŠ›ã—ã¦ã€æ¶ç©ºæ–™ç†åç”Ÿæˆã‚’ä½“é¨“ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
        <div class="demo-notice">
            <small>ğŸ’¡ ãƒ‡ãƒ¢ã§ç”Ÿæˆã—ãŸæ–™ç†ã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚ä¿å­˜æ©Ÿèƒ½ã‚’ä½¿ã†ã«ã¯<a href="{% url 'users:login' %}">ãƒ­ã‚°ã‚¤ãƒ³</a>ã—ã¦ãã ã•ã„ã€‚</small>
        </div>
    </div>

    {% if not generated_dishes %}
        <div class="demo-form-section">
            <form method="post" class="demo-form">
                {% csrf_token %}
                <div class="form-group">
                    <label for="ingredients">ææ–™ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰:</label>
                    <input 
                        type="text" 
                        id="ingredients" 
                        name="ingredients" 
                        placeholder="ä¾‹: åµ, ãƒã‚®, ãƒãƒ¼ã‚º, æœŸé™åˆ‡ã‚Œã®ç‰›ä¹³"
                        class="form-control"
                        required
                    >
                    <small class="form-help">å°‘ãªãã¨ã‚‚2ã¤ã®ææ–™ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</small>
                </div>
                
                <button type="submit" class="btn btn-primary btn-generate">
                    <span class="btn-icon">ğŸ²</span>
                    æ–™ç†åã‚’ç”Ÿæˆã™ã‚‹
                </button>
            </form>
        </div>

        <div class="demo-examples">
            <h3>å…¥åŠ›ä¾‹:</h3>
            <div class="example-tags">
                <button type="button" class="example-tag" onclick="fillExample('åµ, ãƒã‚®, ãƒãƒ¼ã‚º')">
                    åµ, ãƒã‚®, ãƒãƒ¼ã‚º
                </button>
                <button type="button" class="example-tag" onclick="fillExample('ã˜ã‚ƒãŒã„ã‚‚, ç‰ã­ã, äººå‚, ç‰›è‚‰')">
                    ã˜ã‚ƒãŒã„ã‚‚, ç‰ã­ã, äººå‚, ç‰›è‚‰
                </button>
                <button type="button" class="example-tag" onclick="fillExample('æœŸé™åˆ‡ã‚Œã®ç‰›ä¹³, ãƒ‘ãƒ³, ã¯ã¡ã¿ã¤')">
                    æœŸé™åˆ‡ã‚Œã®ç‰›ä¹³, ãƒ‘ãƒ³, ã¯ã¡ã¿ã¤
                </button>
            </div>
        </div>
    {% else %}
        <div class="demo-results">
            <div class="input-materials">
                <h3>å…¥åŠ›ã—ãŸææ–™:</h3>
                <div class="ingredient-tags">
                    {% for ingredient in input_ingredients %}
                        <span class="ingredient-tag">{{ ingredient }}</span>
                    {% endfor %}
                </div>
            </div>

            <div class="generated-dishes">
                <h3>âœ¨ ç”Ÿæˆã•ã‚ŒãŸæ¶ç©ºæ–™ç†</h3>
                <div class="dishes-grid">
                    {% for dish_name in generated_dishes %}
                        <div class="dish-card demo-dish">
                            <h4 class="dish-name">{{ dish_name }}</h4>
                            <div class="demo-badge">ãƒ‡ãƒ¢</div>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <div class="demo-actions">
                <form method="post" class="regenerate-form">
                    {% csrf_token %}
                    <input type="hidden" name="ingredients" value="{% for ingredient in input_ingredients %}{{ ingredient }}{% if not forloop.last %}, {% endif %}{% endfor %}">
                    <button type="submit" class="btn btn-secondary">
                        ğŸ”„ åˆ¥ã®æ–™ç†ã‚’ç”Ÿæˆã™ã‚‹
                    </button>
                </form>
                
                <a href="{% url 'dishes:demo' %}" class="btn btn-outline">
                    ğŸ”„ æ–°ã—ã„ææ–™ã§è©¦ã™
                </a>
            </div>

            <div class="signup-prompt">
                <div class="prompt-card">
                    <h3>æ°—ã«å…¥ã£ãŸæ–™ç†ã¯ä¿å­˜ã—ã¾ã›ã‚“ã‹ï¼Ÿ</h3>
                    <p>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ã€ç”Ÿæˆã—ãŸæ–™ç†ã‚’ä¿å­˜ã—ã¦ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚·ã‚§ã‚¢ã§ãã¾ã™ï¼</p>
                    <div class="prompt-actions">
                        <a href="{% url 'users:signup' %}" class="btn btn-primary">
                            æ–°è¦ç™»éŒ²
                        </a>
                        <a href="{% url 'users:login' %}" class="btn btn-outline">
                            ãƒ­ã‚°ã‚¤ãƒ³
                        </a>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
</div>

<script>
function fillExample(ingredients) {
    document.getElementById('ingredients').value = ingredients;
}
</script>
{% endblock %}
